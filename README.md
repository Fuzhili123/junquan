# 森林管理数据查询系统

一个基于Vue 3 + Vant的H5移动端应用，用于查询和管理森林管理Excel数据。

## 功能特性

- 📱 **移动端优化**：专为手机端设计的响应式界面
- 📊 **Excel数据导入**：支持导入大型Excel文件（20万行+，30MB+）
- 🔍 **多条件搜索**：支持按林场、林队、小班、作业内容等多个维度搜索
- 📄 **分页加载**：大数据量下的流畅分页体验
- 📋 **详情查看**：完整的数据详情展示
- 💾 **本地存储**：查询历史记录本地保存

## 技术栈

- **前端框架**：Vue 3 + Composition API
- **UI组件库**：Vant 4（专为移动端设计）
- **状态管理**：Pinia
- **路由管理**：Vue Router 4
- **Excel解析**：xlsx.js
- **构建工具**：Vite
- **样式**：原生CSS + Vant主题

## 项目结构

```
src/
├── components/          # 公共组件
├── views/              # 页面组件
│   ├── Home.vue        # 首页
│   ├── Search.vue      # 搜索页面
│   └── Detail.vue      # 详情页面
├── stores/             # 状态管理
│   └── forestData.js   # 森林数据状态
├── utils/              # 工具函数
│   └── excelParser.js  # Excel解析工具
├── router/             # 路由配置
│   └── index.js
├── App.vue             # 根组件
└── main.js             # 入口文件
```

## 安装和运行

### 环境要求

- Node.js >= 16.0.0
- npm >= 8.0.0

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

访问 `http://localhost:3000` 查看应用

### 构建生产版本

```bash
npm run build
```

构建文件将输出到 `dist` 目录

### 预览生产版本

```bash
npm run preview
```

## 使用说明

### 1. 导入Excel数据

1. 点击首页的"导入Excel"按钮
2. 选择您的Excel文件（支持.xlsx和.xls格式）
3. 系统会自动解析并导入数据
4. 导入成功后可以开始查询

### 2. 数据查询

1. 点击"数据查询"进入搜索页面
2. 填写搜索条件：
   - **林场**：输入林场名称
   - **林队**：输入林队名称
   - **小班**：输入小班名称
   - **更新方式**：如"植苗"
   - **更新年度**：如"2016"
   - **作业内容**：如"清理迹地"
   - **作业人**：输入作业人姓名
   - **验收人**：输入验收人姓名
3. 点击"搜索"按钮开始查询
4. 查看搜索结果，支持下拉刷新和上拉加载更多

### 3. 查看详情

1. 在搜索结果列表中点击任意一条记录
2. 查看完整的数据详情
3. 支持分享和编辑功能（编辑功能开发中）

## Excel数据格式要求

根据您提供的Excel截图，系统支持以下数据字段：

- 林场、林队、小班
- 更新方式、更新年度
- 作业面积、本批次结算面积
- 作业内容、录账项目
- 作业完成日期
- 投资标准（每亩单价、投资金额）
- 实际投资（每亩单价、投资金额）
- 作业人、验收人
- 验收日期
- 本周期开始/结束日期
- 备注

## 性能优化

- **分页加载**：大数据量采用分页加载，每页20条记录
- **虚拟滚动**：长列表使用虚拟滚动技术
- **懒加载**：图片和组件按需加载
- **缓存策略**：查询结果和解析数据本地缓存
- **压缩优化**：生产版本自动压缩和代码分割

## 移动端适配

- **响应式设计**：适配不同屏幕尺寸
- **触摸优化**：针对触摸操作优化交互
- **性能优化**：移动端性能优化
- **离线支持**：支持PWA离线访问

## 浏览器支持

- iOS Safari 12+
- Android Chrome 70+
- 微信内置浏览器
- 其他现代移动浏览器

## 开发说明

### 添加新功能

1. 在 `src/views/` 下创建新页面
2. 在 `src/router/index.js` 中添加路由
3. 如需状态管理，在 `src/stores/` 下创建store

### 自定义主题

修改 `src/main.js` 中的Vant主题配置：

```javascript
import { ConfigProvider } from 'vant'

app.use(ConfigProvider, {
  theme: {
    primaryColor: '#1989fa'
  }
})
```

### 数据字段映射

如需修改Excel字段映射，编辑 `src/utils/excelParser.js` 中的 `getFieldMapping()` 方法。

## 常见问题

### Q: Excel文件太大导入失败怎么办？
A: 系统支持30MB+的Excel文件，如果仍然失败，请检查文件格式是否正确，或尝试将数据分割成多个文件。

### Q: 搜索速度慢怎么办？
A: 大数据量搜索需要一定时间，系统已做优化。建议使用更精确的搜索条件来减少结果数量。

### Q: 移动端显示异常怎么办？
A: 请确保使用现代移动浏览器，并检查网络连接。建议在微信内置浏览器中使用。

## 更新日志

### v1.0.0 (2024-01-XX)
- ✨ 初始版本发布
- ✨ 支持Excel数据导入和解析
- ✨ 实现多条件搜索功能
- ✨ 移动端响应式设计
- ✨ 数据详情查看和分享功能

## 许可证

MIT License

## 联系方式

如有问题或建议，请联系开发团队。

